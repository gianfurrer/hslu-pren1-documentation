\newpage
\section{Hardware Test}

\subsection{Ultraschallsensor}
Als Ultraschallsensor hat man den Typ HC-SR04 getestet. Dieser hat eine Reichweite von 2 cm bis 300 cm mit einer Genauigkeit von 3 mm. Der Sensor wird an 5 V angeschlossen. Mit dem Trigger Pin aktiviert sich die Messung. Der Echo Pin empfängt dabei das, vom Trigger ausgelöste, Signal. Dieser Zeitunterschied zwischen Senden und Empfangen ist dann mit der Schallgeschwindigkeit umgerechnet die Distanz. Der Sensor wird mit dem Testaufbau ermittelt man die reale Präzision dieses Sensors (sieh Abbildung \ref{fig:Ultraschall1}).

\begin{figure}[h] % 'h' steht für here, was bedeutet, dass das Bild möglichst an dieser Stelle eingefügt wird
    \centering
    \includegraphics[width=0.5\textwidth]{img/sensortest/Ultraschall_Senkrecht.jpg} % Bildname und Breite der Grafik angeben
    \caption{Testaufbau Ultraschallsensor}
    \label{fig:Ultraschall1} % Label für die Referenzierung der Abbildung
\end{figure}

Daraus ergaben sich folgende Messwerte:
\begin{table}[h!]
\centering
\begin{tabular}{>{\raggedright\arraybackslash}p{3cm} >{\raggedright\arraybackslash}p{3cm}}
\toprule
\textbf{Position} & \textbf{Messwert} \\
\midrule
10 mm & 22 mm \\
20 mm & 25 mm \\
30 mm & 31 mm \\
40 mm & 41 mm \\
50 mm & 54 mm \\
60 mm & 61 mm \\
70 mm & 69 mm \\
80 mm & 82 mm \\
90 mm & 89 mm \\
100 mm & 95 mm \\
110 mm & 112 mm \\
120 mm & 121 mm \\
130 mm & 130 mm \\
140 mm & 136 mm \\
150 mm & 149 mm \\
160 mm & 160 mm \\
170 mm & 170 mm \\
180 mm & 181 mm \\
190 mm & 190 mm \\
200 mm & 205 mm \\
\bottomrule
\end{tabular}
\caption{Positionen und Messwerte}
\label{tab:position_messwert}
\end{table}

Man sieht, dass der Sensor ungenauer ist in der Nähe des Sensors. Entfernt sich das Objekt, wird er präziser.

\newpage

\subsection{Time of Flight Sensor}
Ein Time of Flight Sensor funktioniert ähnlich wie ein Ultraschallsensor. Ausser das ein Lichtstrahl anstatt von einer Schallwelle ausgesendet wird. In diesem Versuch wird ein VL530LX verwendet. Der Testaufbau ist derselbe wie bei dem Ultraschallsensor (siehe Abbildung \ref{fig:TOF1}).

\begin{figure}[h] % 'h' steht für here, was bedeutet, dass das Bild möglichst an dieser Stelle eingefügt wird
    \centering
    \includegraphics[width=0.5\textwidth]{img/sensortest/TOF_Verschoben.jpg} % Bildname und Breite der Grafik angeben
    \caption{Testaufbau TOF Sensor}
    \label{fig:TOF1} % Label für die Referenzierung der Abbildung
\end{figure}



Die Messungen ergaben folgende Resultate:


\begin{table}[h!]
\centering
\begin{tabular}{>{\raggedright\arraybackslash}p{3cm} >{\raggedright\arraybackslash}p{3cm}}
\toprule
\textbf{Position} & \textbf{Messwert} \\
\midrule
10 mm & 11 mm \\
20 mm & 24 mm \\
30 mm & 31 mm \\
40 mm & 43 mm \\
50 mm & 51 mm \\
60 mm & 63 mm \\
70 mm & 72 mm \\
80 mm & 84 mm \\
90 mm & 93 mm \\
100 mm & 102 mm \\
110 mm & 115 mm \\
120 mm & 125 mm \\
130 mm & 132 mm \\
140 mm & 145 mm \\
150 mm & 151 mm \\
160 mm & 163 mm \\
170 mm & 170 mm \\
180 mm & 182 mm \\
190 mm & 190 mm \\
200 mm & 200 mm \\
\bottomrule
\end{tabular}
\caption{Positionen und Messwerte (aktualisiert)}
\label{tab:position_messwert_aktualisiert}
\end{table}
Hier sieht man 


\subsection{Farbsensor}
Der Farbsensor der hier getestet wird ist der TCS34725. Dieser kommunizier über eine I2C Schnittstelle und liefert folgende Werte: Temperaturwert in Kelvin, Lux, Rotwert, Grünwert, Bauwert, Clearwert. Hier geht es darum welcher dieser Wert sich am meisten Unterscheidet. Damit der Abstand zum Boden immer gleich ist, wurde ein Halter gedruckt, der den Sensor 1 cm über Boden hält (siehe Abbildung \ref{fig:Farbsensorhalter}).

\begin{figure}[h] % 'h' steht für here, was bedeutet, dass das Bild möglichst an dieser Stelle eingefügt wird
    \centering
    \includegraphics[width=0.3\textwidth]{img/sensortest/FarbsensorHalter.jpg} % Bildname und Breite der Grafik angeben
    \caption{Farbsensorhalter}
    \label{fig:Farbsensorhalter} % Label für die Referenzierung der Abbildung
\end{figure}

Nun werden alle vier Möglichen Szenarien getestet siehe Abbildung \ref{fig:Testanordnungen}. Einmal die Linie, der weisse Punkt, die rote Platte und noch die Fuge.


\begin{figure}[H]
    \centering
    % Oben links
    \begin{subfigure}{0.3\textwidth} % Breite auf 45% gesetzt, um Platz für zwei Bilder pro Zeile zu schaffen
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/Farbsensor_Linie.jpg}
        \caption{Farbsensor Linie}
        \label{fig:FarbsensorLinie}
    \end{subfigure}
    % Oben rechts
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/Farbsensor_WeisserPunkt.jpg}
        \caption{Farbsensor Weisser Punkt}
        \label{fig:FarbsensorWeisserPunkt}
    \end{subfigure}
    
    % Abstand zwischen den Reihen
    \vspace{0.5cm}

    % Unten links
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/Farbsensor_Platte.jpg}
        \caption{Farbsensor Platte}
        \label{fig:FarbsensorPlatte}
    \end{subfigure}
    % Unten rechts
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/Farbsensor_Fuge.jpg}
        \caption{Farbsensor Fuge}
        \label{fig:FarbsensorFuge}
    \end{subfigure}

    \caption{Testaufbau}
    \label{fig:Testanordnungen}
\end{figure}

Das ergab folgende Messdaten:


\begin{figure}[H]
    \centering
    % Oben links
    \begin{subfigure}{0.45\textwidth} % Breite auf 45% gesetzt, um Platz für zwei Bilder pro Zeile zu schaffen
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/MD_Linie.png}
        \caption{Messdaten Farbsensor Linie}
        \label{fig:MDFarbsensorLinie}
    \end{subfigure}
    % Oben rechts
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/MD_WeisserPunkt.png}
        \caption{Messdaten Farbsensor Weisser Punkt}
        \label{fig:MDFarbsensorWeisserPunkt}
    \end{subfigure}
    
    % Abstand zwischen den Reihen
    \vspace{0.5cm}

    % Unten links
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/MD_RotePlatte.png}
        \caption{Messdaten Farbsensor Platte}
        \label{fig:MDFarbsensorPlatte}
    \end{subfigure}
    % Unten rechts
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/sensortest/MD_Fuge.png}
        \caption{Messdaten Farbsensor Fuge}
        \label{fig:MDFarbsensorFuge}
    \end{subfigure}

    \caption{Messdaten Farbsensor}
    \label{fig:Testanordnungen}
\end{figure}

Aus den Messdaten erkennt man das der Lux Wert sich am meisten unterscheidet. Jedoch fällt auch auf, dass die benötigte Zeit für eine Messung fast eine halbe Sekunde beträgt. Das könnte ein Problem geben, da sich das Fahrzeug bei Fortbewegen in einer halben Sekunde eine grosse Strecke zurücklegt. Daher ist die Option einen Farbsensor zu verwenden als Liniendetektion eher unwahrscheinlich. Jedoch kann dieser gut genutzt werden um eine zweite Abfrage für den weissen Punkt zu realisieren.

