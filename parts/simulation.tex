\documentclass[../main.tex]{subfiles}
\graphicspath{{\subfix{../img/}}}
\begin{document}

\newpage
\section{Simulator}

Der Simulator dient dazu, die Funktionalität der Software des autonomen Fahrzeugs zu testen, bevor der physische Prototyp gebaut wird.

\subsection{Spezifikation}

In diesem Abschnitt wird definiert, was der Simulator genau leisten soll.


% TODO: Transform to table 
\begin{itemize}
    \item Es wird (ohne Beachtung der Hindernisse) immer der schnellste Weg ins Ziel gefunden wird.
    \item Wegpunkte mit Pylonen werden nicht befahren.
    \item Entfernte Linien werden nicht befahren.
    \item Linien mit Hindernisse werden erkannt und nur befahren, falls ein Umweg länger dauert (konfigurierbar).
    \item Neue Informationen können während der Fahrt aufgenommen und entsprechende Anpassungen dazu getroffen werden.
    \item Kommandos, die an die Hardware geschickt werden sollen, werden aufgezeigt.
    \item Das Ziel kann konfiguriert werden (A, B oder C)
\end{itemize}



\subsection{Morphologischer Kasten}

\begin{itemize}
    \item User Interface
        \begin{itemize}
            \item Terminal
            \item \textbf{Einfaches GUI}
            \item Unreal Engine
        \end{itemize}
    \item Programmiersprache
        \begin{itemize}
            \item \textbf{Python}
            \item JavaScript
            \item Java
        \end{itemize}
    \item Wegfindungs-Algorithmus
        \begin{itemize}
            \item \textbf{Externe Library}
            \item Eigene Implementation
        \end{itemize}
    \item Informationen einlesen
        \begin{itemize}
            \item Konfigurationsdatei
            \item Bilder
        \end{itemize}
    \item Hindernis Bewältigung
        \begin{itemize}
            \item Gewicht hinzufügen
            \item Immer umfahren
            \item Keine spezielle Behandlung
        \end{itemize}
\end{itemize}

\subsubsection{User Interface}

Obwohl wir ebenfalls eine Unreal Engine mit dem Pfadfinder-Model erstellen, wäre der Aufwand zu gross, diesen an den Simulator anzubinden. Die Ausgabe in einem Terminal hingegen wäre zu minimal. Deshalb wird das User Interface mit einem einfachen GUI umgesetzt. 

\subsubsection{Programmiersprache}

Bei der Programmiersprache kamen Python, JavaScript und Java in Frage.
Java wird für die meisten Projekte im Informatik-Studium verwendet, wodurch viel wissen vorhanden ist. JavaScript erlaubt es, einfach graphische Darstellungen mittels Webseite zu implementieren. Python ist sehr simpel und wird oft  

\subsection{Konzept}

Idealerweise würde der Simulator die komplette Hardware des autonomen Fahrzeuges simulieren. So wäre die Software, die auf dem Fahrzeug läuft, genau die gleiche, die vom Simulator getestet wird. Dies ist jedoch mit sehr viel Aufwand verbunden, weshalb dies für die erste Version des Simulators für uns nicht realisierbar ist.

Die erste Version des Simulators soll anhand einer vordefinierten Konfiguration den schnellsten Weg ins Ziel finden. Die Konfiguration enthält folgende Informationen:
\begin{itemize}
    \item Das Ziel: A, B oder C.
    \item Die Gewichtung für das Befahren eines Hindernis.
    \item Informationen die erst beim Befahren eines neuen Wegpunktes freigeschalten werden:
     \begin{itemize}
        \item{Wegpunkte mit einem Pylon}
        \item{Entfernte Linien}
        \item{Erkannte Hindernisse}
   \end{itemize}
\end{itemize}


Damit die Simulation weiss, auf welchen Wegpunkten bzw. Linien sich Hindernisse befinden, wird jeder Wegpunkt beschriftet:

\imagewidth{simulation/labeled-graph.png}{Beschrifteter Graph}{10cm}

Die Konfiguration wird in einer YAML-Datei abgespeichert und sieht wie folgt aus.

\begin{verbatim}
end: B
weight: 3
S:
  cones: [E]
  obstacles: 
    - [S, F] 
  removed:
    - [E, A]
D:
  removed:
    - [D, B]
  obstacles:
    - [D, A]
\end{verbatim}

In der Beispielskonfiguration wird das Ziel B angesteuert.
Eine Line mit Hindernis wird dreifach gewichtet im Vergleich zu einer normaler Line.  
Am Start (Knote S) erfährt die Software, dass auf dem Knoten E sich eine Pylone befindet,
auf der Linie S-F ein Hindernis und dass die Linie E-A entfernt wurde.
Falls das Fahrzeug die Kante D befährt, wird erkannt, dass die Kante D-B nicht existiert und dass sich auf Kante D-A ein Hindernis befindet.

Diese Konfiguration kann einfach angepasst werden, wodurch mit dem Simulator einfach verschiedene Szenarien durchgespielt werden können.


\subsubsection{Nutzwertanalyse}
\textbf{TODO: Benötigt anpassungen}
Die Wegfindung und Entscheidungsprozesse des Fahrzeugs sollen anhand eines Simulators und vor dessen Bau getestet werden können. Bei der Technologierecherche wurden zwei Methoden recherchiert, die in diesem Abschnitt genauer analysiert werden.
Der passendste Simulator wird anhand einer Nutzwertanalyse mit den folgenden Kriterien gewählt.

\begin{itemize}
\item \textbf{Anpassbarkeit}: Das wichtigste Kriterium ist, dass der Simulator genau an die Problemstellung angepasst werden kann.
\item \textbf{Geschwindigkeit}: Die Simulation soll auf handelsüblichen Rechnern mit moderater Leistung schnell laufen, um einfache Softwareiteration zu ermöglichen.  
\item \textbf{Komplexität}: Das Projekt ist zeitlich limitiert. Der Aufwand für die Implementierung und Anpassung des Simulators muss berücksichtigt werden.
\item \textbf{Schnittstellen}: Damit der Simulator angesteuert werden kann, soll er möglichst einfache Schnittstellen besitzen.
\end{itemize}


\begin{table}[H]
\resizebox{\textwidth}{!}{

 \centering
 \renewcommand{\arraystretch}{1.5}
     \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|}
        \hline
        \multicolumn{2}{|c|}{} & 
        \multicolumn{2}{c|}{\textbf{Selbst entwickelt}} &
        \multicolumn{2}{c|}{\textbf{MicroMouseSimulator}}\\ 
        \hline
        
        \textbf{Kriterium} & \textbf{Gewicht} &
        \textbf{Bewertung} & \textbf{Punkte} &
        \textbf{Bewertung} & \textbf{Punkte}\\
        \hline

        Anpassbarkeit & 40 &
        10 & 360 &
        5 & 200 \\
        \hline

        Schnittstellen & 30 &
        10 & 300 &
        8 & 240  \\
        \hline

        Komplexität & 20 &
        8 & 160 &
        4 & 80 \\
        \hline

        Geschwindigkeit & 10 &
        8 & 80 &
        9 & 90 \\
        \hline


        
        \textbf{Nutzwert:} & 100 & & 900 & & 610\\ \hline
    \end{tabular}
 }
    \caption{Nutzwertanalyse Simulator}
    \label{tab:nutzwertanalyse_simulator}
\end{table}

Ein selbstgebauter Simulator erreicht in der durchgeführten Nutzwertanalyse (siehe Tabelle \ref{tab:nutzwertanalyse_simulator}) die beste Gesamtbewertung. Das hohe Mass an Anpassbarkeit und die Möglichkeit, Schnittstellen nach Belieben zu implementieren, sprechen klar für eine Eigenentwicklung. Der MicroMouseSimulator ist bereits auf Geschwindigkeit optimiert, jedoch sollte der Unterschied auf modernen Rechnern einen zu kleinen Unterschied machen, als dass die anderen Nachteile aufgeholt würden. Statt sich in den Source-Code eines bereits bestehenden Projektes einzulesen, kann von Grund auf für die vorhandene Problemstellung entwickelt werden.

\end{document}